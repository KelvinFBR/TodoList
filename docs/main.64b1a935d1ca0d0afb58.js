(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t){for(var o,n=0;n<t.length;n++)(o=t[n]).enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}e.d({},{L:()=>h});var o=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.task=t,this.id=(new Date).getTime(),this.completed=!1,this.created=new Date}return function(e,o,n){o&&t(e.prototype,o),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,null,[{key:"fromJson",value:function(t){var o=t.task,n=t.id,a=t.completed,c=t.created,r=new e(o);return r.id=n,r.completed=a,r.created=c,r}}]),e}();function n(e,t){for(var o,n=0;n<t.length;n++)(o=t[n]).enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}var a=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.loadLocalStorage()}return function(e,t,o){t&&n(e.prototype,t),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"newTodo",value:function(e){this.todos.push(e),this.saveStorageTodos()}},{key:"deleteTodo",value:function(e){this.todos=this.todos.filter((function(t){return t.id!==parseInt(e)})),this.saveStorageTodos()}},{key:"toggleTodo",value:function(e){var t=this.todos.find((function(t){return t.id===parseInt(e)}));t.completed=!t.completed,this.saveStorageTodos()}},{key:"clearCompleted",value:function(){this.todos=this.todos.filter((function(e){return!e.completed})),this.saveStorageTodos()}},{key:"saveStorageTodos",value:function(){localStorage.setItem("todos",JSON.stringify(this.todos))}},{key:"getStorageTodos",value:function(){return JSON.parse(localStorage.getItem("todos"))}},{key:"loadLocalStorage",value:function(){this.todos=localStorage.getItem("todos")?JSON.parse(localStorage.getItem("todos")):[],this.todos=this.todos.map(o.fromJson)}}]),e}(),c=document.querySelector(".todo-items"),r=document.querySelector(".form-container"),s=document.querySelector(".items-length"),i=document.querySelector(".clear-completed"),l=document.querySelector(".filter-todos"),d=document.querySelectorAll(".filter-todos li"),m=function(e){var t=document.createElement("div"),o='\n    <li class="todo-item '.concat(e.completed?"check":"",'" data-id="').concat(e.id,'">\n        <span class="check-btn">\n          <img src="./assets/icon/icon-check.svg" alt="check" />\n        </span>\n        <p class="text">').concat(e.task,'</p>\n        <span class="close">\n          <img src="./assets/icon/icon-cross.svg" alt="cross" />\n        </span>\n    </li>');return t.innerHTML=o,c.appendChild(t.firstElementChild),t.firstElementChild},u=function(e){return e.parentElement.parentElement.dataset.id||e.parentElement.dataset.id},f=function(){s.textContent="",s.textContent=h.todos.length};r.addEventListener("submit",(function(e){e.preventDefault();var t=new FormData(r).get("todo");if(""!==t.trim()){var n=new o(t);h.newTodo(n),m(n),r.reset()}f()})),c.addEventListener("click",(function(e){var t=e.target,o=t.matches(".check-btn")||t.parentElement.matches(".check-btn"),n=t.parentElement.matches(".close"),a=t.parentElement.parentElement.matches(".todo-item")||t.parentElement.matches(".todo-item");if(o&&a){var r=u(t);h.toggleTodo(r),t.parentElement.parentElement.matches(".todo-item")&&t.parentElement.parentElement.classList.toggle("check"),t.parentElement.classList.toggle("check")}else if(n){var s=u(t);h.deleteTodo(s);var i=t.parentElement.parentElement;c.removeChild(i)}f()})),i.addEventListener("click",(function(){h.clearCompleted();for(var e,t=c.children.length-1;0<=t;t--)(e=c.children[t]).classList.contains("check")&&e.remove();f()})),l.addEventListener("click",(function(e){var t=document.querySelectorAll(".todo-items li"),o=e.target,n=e.target.textContent;c.children;d.forEach((function(e){e.classList.remove("selected")})),t.forEach((function(e){e.classList.remove("hidden")}));for(var a,r=c.children.length-1;0<=r;r--)switch(a=c.children[r],n){case"Active":o.classList.add("selected"),a.classList.contains("check")&&a.classList.add("hidden");break;case"Completed":o.classList.add("selected"),a.classList.contains("check")||a.classList.add("hidden");break;default:o.classList.add("selected"),a.classList.remove("hidden")}}));var h=new a,p=document.querySelector(".mode-container");h.todos.forEach(m),document.body.classList.add(localStorage.getItem("mode")),p.addEventListener("click",(function(e){var t=e.target,o="";t.matches("#sun")&&(document.body.classList.remove("dark"),o="light",localStorage.setItem("mode",o)),t.matches("#moon")&&(document.body.classList.add("dark"),o="dark",localStorage.setItem("mode",o))}))})();